---
// src/pages/index.astro
import Layout from '../components/Layout.astro' // Layoutをインポート
// 必要ならここで getCollection してブログ一覧のデータを取る
const showBanner = true // トップページ専用のバナーを表示するためのフラグ
import BlogCardList from '../components/BlogCard.astro'
---

<Layout frontmatter={{ title: 'トップページ' }} showBanner={true}>
  <div class="video-hero-wrapper mt-0">
    <section class="video-hero">
      <video autoplay loop muted playsinline class="video-bg">
        <source src="/videos/mainvideo.webm" type="video/webm" />
        <source src="/videos/mainvideo.mp4" type="video/mp4" />
      </video>
      <div class="video-overlay d-flex align-items-center">
        <div class="video-text">
          <h2 class="catchcopy">自ら運営してきたビジネスだから「使い勝手」と「コスト」に妥協できませんでした！</h2>
        </div>
      </div>
    </section>
  </div>

  <section class="section container my-3">
    <h3 class="text-secondary text-center my-5">ラインナップ</h3>

    <section class="container py-5">
      <div class="row g-4">
        <!-- カード1 -->
        <div class="col-md-4">
          <a href="/cloudstation/" class="text-decoration-none text-dark">
            <div class="card h-100 shadow-sm border-0 hover-shadow transition">
              <img src="images/bg.webp" class="card-img-top" alt="クラウドステーション" />
              <div class="card-body text-center">
                <h5 class="card-title fw-bold">クラウドステーション</h5>

                <p class="text-muted small mb-2">個々のデバイスを<br />フルスペック発揮させる<br />オフィスの実践IOT</p>
              </div>
            </div>
          </a>
        </div>

        <!-- カード2 -->
        <div class="col-md-4">
          <a href="https://salonkarte.hotaka-g.jp" target="_blank" class="text-decoration-none text-dark">
            <div class="card h-100 shadow-sm border-0 hover-shadow transition">
              <img src="images/salon.jpg" class="card-img-top" alt="サロンカルテ" />
              <div class="card-body text-center">
                <h5 class="card-title fw-bold">サロンカルテ</h5>

                <p class="text-muted small mb-2">30年間ずっとほしかった<br />PC不要の顧客管理システム</p>
              </div>
            </div>
          </a>
        </div>

        <!-- カード3 -->
        <div class="col-md-4">
          <a href="https://lawmanager.hotaka-g.jp/" target="_blank" class="text-decoration-none text-dark">
            <div class="card h-100 shadow-sm border-0 hover-shadow transition">
              <img src="images/judge.webp" class="card-img-top" alt="士業業務管理システム" />
              <div class="card-body text-center">
                <h5 class="card-title fw-bold">士業業務管理システム</h5>

                <p class="text-muted small mb-2">グループ企業の弁護士事務所に<br />ピッタリのソフトがありませんでした</p>
              </div>
            </div>
          </a>
        </div>
      </div>
    </section>
  </section>

  <section>
    <div class="container my-5">
      <div class="text-center mt-5">
        <BlogCardList count={3} />
        <a href="/blog/" class="btn btn-outline-primary px-4 py-2"> 記事一覧へ </a>
      </div>
    </div>
  </section>

  <section class="bg-dark text-white py-5" style="font-family: 'Hiragino Mincho ProN', serif;">
    <div class="container">
      <!-- タイトル -->
      <h2 class="text-center mb-5">Company Profile</h2>
      <hr />

      <!-- ご挨拶 -->
      <div class="mb-5">
        <h5 class="fw-bold mb-3">ご挨拶</h5>
        <p>
          当社ホームページをご覧いただき誠にありがとうございます。<br />
          当社の強みは：<br />
          ①既存の豊富なアプリを研究し、組み合わせ、企業によって必要とするシステムに変化させ運用。既存のアプリがなければ御社に合わせたアプリを開発。<br />
          ②PC、スマートフォン、タブレットPCなど全てのデバイスを有効活用する運用支援のご提案。<br />
          ③ヒヤリングから企画・立案、各種設定、運用支援、サポートまでワンストップで対応いたします。<br />
          日々進化するIT情報を常に最新のものに保ち、御社の固有財産の有効活用をお約束いたします。
        </p>
        <p class="text-end">代表　亀岡 卓哉</p>
      </div>
      <hr />

      <!-- 会社概要 & 業務案内 -->
      <div class="row mb-5">
        <div class="col-md-6">
          <h5 class="fw-bold mb-3">会社概要</h5>
          <ul class="list-unstyled">
            <li>社名：株式会社 ほたか</li>
            <li>代表者：亀岡 卓哉</li>
            <li>住所：栃木県宇都宮市操町4-11</li>
            <li>TEL：028-637-1861</li>
            <li>FAX：028-612-1863</li>
            <li>E-Mail：info★hotaka-g.com（★マークを@に変えてご送信ください）</li>
          </ul>
        </div>
        <div class="col-md-6">
          <h5 class="fw-bold mb-3">業務案内</h5>
          <ul>
            <li>ITコンサルティング</li>
            <li>業務用アプリの開発</li>
            <li>iPad・iPhoneのキッティング業務</li>
            <li>スマホ・タブレットPCのサインイン業務</li>
            <li>Apple製品の導入、設定、導入運用支援</li>
            <li>クラウド製品の導入、運用支援</li>
            <li>各種団体への設計、設定・運用支援</li>
            <li>業種別ソリューションのご提案</li>
            <li>IT関連講習会の開催</li>
            <li>PC機器の販売・納品</li>
            <li>公的機関・OA機器の販売</li>
            <li>ホームページ制作</li>
          </ul>
        </div>
      </div>

      <!-- 実績 -->
      <div>
        <h5 class="fw-bold mb-3">実績</h5>
        <ul>
          <li>上場企業様 iPad導入運営セミナーの実施</li>
          <li>法律事務所様 データ管理および元化対応のコンサルティング</li>
          <li>官公庁向けタブレットの開発、コンサルティング、運用支援</li>
          <li>住宅会社様のクラウド導入支援、運用、設定</li>
          <li>小規模事業者様へのクラウド導入コンサルティング支援</li>
          <li>教育機関様 クラウド導入支援、運用、設定、コンサルティング</li>
          <li>製造業様 クラウド導入支援、運用、設定、セキュリティ対策</li>
        </ul>
      </div>
    </div>
  </section>

  <section class="py-5 bg-white">
    <div class="container">
      <h2 class="text-center mb-4 text-secondary">Access</h2>

      <div class="card shadow-sm border-0">
        <div class="ratio ratio-4x3">
          <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d12819.237996231099!2d139.870827!3d36.558706!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x601f67c6129ed48f%3A0xe432dd371945dae9!2z5pel5pys44CB44CSMzIwLTA4NjMg5qCD5pyo55yM5a6H6YO95a6u5biC5pON55S677yU4oiS77yVIO-8qO-8r--8tO-8oe-8q--8oeODk-ODqyAyZg!5e0!3m2!1sja!2sus!4v1745289719955!5m2!1sja!2sus" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"> </iframe>
        </div>
      </div>
    </div>
  </section>

  <section class="py-5 bg-light">
    <div class="container contact-form">
      <h2 class="text-center mb-5">Contact us</h2>

      <form id="contactForm">
        <div class="mb-4 row">
          <label class="col-md-3 col-form-label fw-bold">
            お問合せの種類 <span class="text-danger">*必須</span>
          </label>
          <div class="col-md-9 d-flex align-items-center flex-wrap gap-3">
            <label class="form-check-label"><input type="radio" name="type" value="お問い合わせ" checked /> お問い合わせ</label>
            <label class="form-check-label"><input type="radio" name="type" value="リクルート" /> リクルート</label>
            <label class="form-check-label"><input type="radio" name="type" value="サロンカルテについて" /> サロンカルテについて</label>
          </div>
        </div>

        <!-- 以下、1項目ずつ label と input を row + col で囲う -->
        <div class="mb-3 row">
          <label for="company" class="col-md-3 col-form-label">企業名（法人の場合）</label>
          <div class="col-md-9">
            <input type="text" class="form-control" id="companyName" />
          </div>
        </div>

        <div class="mb-3 row">
          <label for="division" class="col-md-3 col-form-label">所属部署（法人の場合）</label>
          <div class="col-md-9">
            <input type="text" class="form-control" id="division" />
          </div>
        </div>

        <div class="mb-3 row">
          <label for="yourName" class="col-md-3 col-form-label">お名前（法人の場合はご担当者名） <span class="text-danger">*必須</span></label>
          <div class="col-md-9">
            <input type="text" class="form-control" id="yourName" required />
          </div>
        </div>

        <div class="mb-3 row">
          <label for="position" class="col-md-3 col-form-label">お役職（法人の場合）</label>
          <div class="col-md-9">
            <input type="text" class="form-control" id="position" />
          </div>
        </div>

        <div class="mb-3 row">
          <label for="yourEmailAddr" class="col-md-3 col-form-label">メールアドレス <span class="text-danger">*必須</span></label>
          <div class="col-md-9">
            <input type="email" class="form-control" id="yourEmailAddr" required />
          </div>
        </div>

        <div class="mb-3 row">
          <label for="phoneNo" class="col-md-3 col-form-label">お電話番号</label>
          <div class="col-md-9">
            <input type="tel" class="form-control" id="phoneNo" />
          </div>
        </div>

        <div class="mb-3 row">
          <label for="toiawasehonbun" class="col-md-3 col-form-label">お問い合わせ内容</label>
          <div class="col-md-9">
            <textarea class="form-control" id="toiawasehonbun" rows="5"></textarea>
          </div>
        </div>
        <!-- 使ってない
      <div class="mb-4 row">
        <div class="offset-md-3 col-md-9">
          <div class="form-check">
            <input class="form-check-input" type="checkbox" id="confirmCheck" required />
            <label class="form-check-label" for="confirmCheck">
              内容をご確認の上、チェックを入れてください。
            </label>
          </div>
        </div>
      </div>
    -->

        <div class="row">
          <div class="offset-md-3 col-md-9">
            <button type="button" id="submitBtn" class="btn btn-primary me-3">メールを送信する</button>
          </div>
        </div>
      </form>
      <div class="row mt-3">
        <div class="col-md-9">
          <div id="thanks" class="text-success fw-bold"></div>
          <div id="errormessage" class="text-danger mt-1"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Axios CDN -->

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    // axios が外部CDNから読み込まれるのを待つため、必要なら import axios from 'axios' などを使うか、
    // もしくはHTMLの末尾にCDNがあれば global から取得されます。

    const form = document.getElementById('contactForm')
    const thanks = document.getElementById('thanks')
    const sendButton = document.getElementById('submitBtn') // IDで取得
    const errorMessage = document.getElementById('errormessage')

    const EMAIL_REG_EXP = /^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]+.[A-Za-z0-9]+$/

    // ボタンをクリックした時の動作を登録
    sendButton.addEventListener('click', async () => {
      sendButton.disabled = true
      errorMessage.textContent = '' // エラーをクリア

      const name = document.getElementById('yourName').value
      const company = document.getElementById('companyName').value
      const tel = document.getElementById('phoneNo').value
      const email = document.getElementById('yourEmailAddr').value
      const content = document.getElementById('toiawasehonbun').value

      try {
        if (!EMAIL_REG_EXP.test(email)) throw 'メールアドレスが不正です'
        if (content.length === 0) throw 'お問い合わせ内容が空欄です'
      } catch (e) {
        errorMessage.textContent = e
        sendButton.disabled = false
        return
      }

      const config = {
        method: 'POST',
        url: 'https://us-central1-nipo-plus.cloudfunctions.net/inqueryWebCommon',
        data: {
          name,
          company,
          tel,
          email,
          text: content,
          site: 'hotaka-g',
        },
      }

      try {
        // @ts-ignore (外部CDNのaxiosを使う場合)
        await axios(config)
        form.style.display = 'none'
        thanks.textContent = `お問い合わせありがとうございます。${email} 宛に確認メールを送信いたしました。5分以内に届かない場合は再度お問い合わせください。`
      } catch (error) {
        errorMessage.textContent = '送信に失敗しました。時間をおいて再度お試しください。'
        sendButton.disabled = false
      }
    })
  </script>
</Layout>
